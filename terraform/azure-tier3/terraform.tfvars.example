# Example Terraform Variables for Tier 3
# Copy this file to terraform.tfvars and customize for your environment

# =============================================================================
# Core Configuration
# =============================================================================

resource_prefix = "migration-tier3"
location        = "eastus"
environment     = "production"
project_name    = "ad-migration-enterprise"

# =============================================================================
# AKS Configuration
# =============================================================================

kubernetes_version = "1.28.3"

# System node pool (Kubernetes system components)
system_node_pool_vm_size  = "Standard_D4s_v5"  # 4 vCPU, 16GB
system_node_pool_min_count = 3
system_node_pool_max_count = 5

# Worker node pool (migration workloads)
worker_node_pool_vm_size  = "Standard_D8s_v5"  # 8 vCPU, 32GB
worker_node_pool_min_count = 6
worker_node_pool_max_count = 12

enable_auto_scaling = true

# =============================================================================
# Networking
# =============================================================================

vnet_address_space         = ["10.0.0.0/16"]
aks_subnet_address_prefix  = "10.0.0.0/20"
appgw_subnet_address_prefix = "10.0.16.0/24"
services_subnet_address_prefix = "10.0.32.0/24"

service_cidr   = "10.100.0.0/16"
dns_service_ip = "10.100.0.10"

# =============================================================================
# Security
# =============================================================================

enable_azure_ad_rbac  = true
enable_private_cluster = false  # Set to true for maximum security
key_vault_sku         = "premium"

# Restrict API server access (empty list = allow all)
authorized_ip_ranges = []
# authorized_ip_ranges = ["1.2.3.4/32", "5.6.7.0/24"]  # Example

# =============================================================================
# Storage
# =============================================================================

storage_account_tier        = "Standard"
storage_account_replication = "GRS"  # Geo-redundant

# =============================================================================
# Monitoring
# =============================================================================

log_analytics_workspace_sku = "PerGB2018"
log_retention_days          = 90

enable_container_insights = true
enable_prometheus         = true
enable_loki              = true
enable_jaeger            = true

# =============================================================================
# Applications
# =============================================================================

deploy_awx   = true
awx_replicas = 3

deploy_vault   = true
vault_replicas = 3

deploy_minio   = true
minio_replicas = 6

# =============================================================================
# Domain Controllers
# =============================================================================

deploy_target_dc  = true
target_dc_vm_size = "Standard_B2s"

source_domain_fqdn = "source.local"
target_domain_fqdn = "target.local"

admin_username = "azureadmin"
admin_password = "CHANGE_ME_SECURE_PASSWORD_HERE"  # Use Key Vault or env var

# =============================================================================
# Backup and DR
# =============================================================================

enable_backup           = true
backup_retention_days   = 30
enable_geo_replication  = true

# =============================================================================
# Cost Management
# =============================================================================

enable_cost_alerts      = true
monthly_budget_amount   = 6000
budget_alert_threshold  = 80

# =============================================================================
# Tags
# =============================================================================

tags = {
  Project     = "AD-Migration"
  Environment = "Production"
  ManagedBy   = "Terraform"
  Tier        = "3"
  CostCenter  = "IT"
  Compliance  = "Required"
  Owner       = "IT-Team"
  Department  = "Infrastructure"
}

